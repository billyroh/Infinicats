<!DOCTYPE html>
<html>
<head>
<title>Infinicats</title>
<link href='style.css' rel='stylesheet' type='text/css'>
<script src='http://code.jquery.com/jquery-1.7.1.min.js'></script>
<script>
var next_max_tag_id;
var i = 0;
var didLoad = false;
$(function() {
	$.ajax({
		type: "GET",
		dataType: "jsonp",
		cache: false,
		url: "https://api.instagram.com/v1/tags/cat/media/recent?client_id=eb65e0f7615f4f839f9819b02fe8757b",
		success: function(rtn) {
			next_max_tag_id = rtn.pagination.next_max_tag_id;
			for (i = 0; i < rtn.data.length; i++) {
				$("#cats").append("<img src='" + rtn.data[i].images.standard_resolution.url +"'>");
			}
			loadMore();
     	}
 	});
});

$(window).scroll(function() {
   if($(window).scrollTop() + $(window).height() > $(document).height() - 2000) {
       loadMore();
       sleep(100);
	}
});

function loadMore() {
	if (!didLoad) {
		didLoad = true;
	$.ajax({
		type: "GET",
		dataType: "jsonp",
		cache: false,
		url: "https://api.instagram.com/v1/tags/cat/media/recent?client_id=eb65e0f7615f4f839f9819b02fe8757b&max_tag_id=" + next_max_tag_id,
		success: function(rtn) {
			next_max_tag_id = rtn.pagination.next_max_tag_id;
			for (i = 0; i < rtn.data.length; i++) {
				$("#cats").append("<img src='" + rtn.data[i].images.standard_resolution.url +"'>");
			}
			didLoad = false;
     	}
     });
 }
}

</script>
</head>
<body>
<div id='cats'>
</div>
</body>
</html>